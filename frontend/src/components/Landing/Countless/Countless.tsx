import React, { useEffect, useState } from 'react';
import css from './Countless.module.scss'
import cx from 'classnames'
import en from '@/locales/en';
import ru from '@/locales/ru';
import { useRouter } from 'next/router';




const Countless = () => {
    const [offsetY, setOffsetY] = useState(0);
    const handleScroll = () => setOffsetY(window.pageYOffset);

    useEffect(() => {
        window.addEventListener("scroll", handleScroll);

        return () => window.removeEventListener("scroll", handleScroll);
    }, []);

    const { locale } = useRouter();
    const t = locale === 'en' ? en : ru;

    const step = [
        {
            img: <svg className={cx(css.volume, css.icons)} width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.9998 16.75C17.8398 16.75 17.6898 16.7 17.5498 16.6C17.2198 16.35 17.1498 15.88 17.3998 15.55C18.9698 13.46 18.9698 10.54 17.3998 8.45C17.1498 8.12 17.2198 7.65 17.5498 7.4C17.8798 7.15 18.3498 7.22 18.5998 7.55C20.5598 10.17 20.5598 13.83 18.5998 16.45C18.4498 16.65 18.2298 16.75 17.9998 16.75Z" />
                <path d="M19.8299 19.25C19.6699 19.25 19.5199 19.2 19.3799 19.1C19.0499 18.85 18.9799 18.38 19.2299 18.05C21.8999 14.49 21.8999 9.51 19.2299 5.95C18.9799 5.62 19.0499 5.15 19.3799 4.9C19.7099 4.65 20.1799 4.72 20.4299 5.05C23.4999 9.14 23.4999 14.86 20.4299 18.95C20.2899 19.15 20.0599 19.25 19.8299 19.25Z" />
                <path d="M14.02 3.78C12.9 3.16 11.47 3.32 10.01 4.23L7.09 6.06C6.89 6.18 6.66 6.25 6.43 6.25H5.5H5C2.58 6.25 1.25 7.58 1.25 10V14C1.25 16.42 2.58 17.75 5 17.75H5.5H6.43C6.66 17.75 6.89 17.82 7.09 17.94L10.01 19.77C10.89 20.32 11.75 20.59 12.55 20.59C13.07 20.59 13.57 20.47 14.02 20.22C15.13 19.6 15.75 18.31 15.75 16.59V7.41C15.75 5.69 15.13 4.4 14.02 3.78Z" />
            </svg>
            ,
            title: t.countless.marketing,
        },
        {
            img: <svg className={cx(css.monitor, css.icons)} width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.56 2H6.41C3.98 2 2 3.98 2 6.41V12.91V13.11C2 15.55 3.98 17.52 6.41 17.52H10.25C10.8 17.52 11.25 17.97 11.25 18.52V19.49C11.25 20.04 10.8 20.49 10.25 20.49H7.83C7.42 20.49 7.08 20.83 7.08 21.24C7.08 21.65 7.41 22 7.83 22H16.18C16.59 22 16.93 21.66 16.93 21.25C16.93 20.84 16.59 20.5 16.18 20.5H13.76C13.21 20.5 12.76 20.05 12.76 19.5V18.53C12.76 17.98 13.21 17.53 13.76 17.53H17.57C20.01 17.53 21.98 15.55 21.98 13.12V12.92V6.42C21.97 3.98 19.99 2 17.56 2Z" />
            </svg>
            ,
            title: t.countless.developers,
        },
        {
            img: <svg className={cx(css.design, css.icons)} width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.98 10.7C20.76 6.8 17.87 3.55 14.01 2.89C13.95 2.12 13.31 1.5 12.52 1.5H11.52C10.73 1.5 10.1 2.11 10.03 2.88C6.15002 3.52 3.24002 6.78 3.02002 10.7C2.31002 10.82 1.77002 11.43 1.77002 12.17V13.17C1.77002 14 2.44002 14.67 3.27002 14.67H4.27002C5.10002 14.67 5.77002 14 5.77002 13.17V12.17C5.77002 11.43 5.23002 10.82 4.52002 10.7C4.73002 7.58 7.02002 4.99 10.08 4.39C10.25 5.03 10.83 5.5 11.52 5.5H12.52C13.21 5.5 13.78 5.03 13.96 4.4C17 5.01 19.27 7.6 19.48 10.7C18.77 10.82 18.23 11.43 18.23 12.17V13.17C18.23 14 18.9 14.67 19.73 14.67H20.73C21.56 14.67 22.23 14 22.23 13.17V12.17C22.23 11.43 21.69 10.81 20.98 10.7Z" />
                <path d="M15.7701 16.55L14.1301 18H9.88008L8.24008 16.55C7.29008 15.77 7.29008 15.17 8.01008 14.25L10.9001 10.59C11.1001 10.34 11.3301 10.17 11.5901 10.08C11.8601 9.98995 12.1501 9.98995 12.4301 10.08C12.6801 10.17 12.9101 10.34 13.1201 10.59L16.0001 14.24C16.7301 15.16 16.6901 15.73 15.7701 16.55Z" />
                <path d="M13.3202 21.9998H10.7302C9.81017 21.9998 9.12017 21.2498 9.30017 20.4498L9.61017 19.0598C9.67017 18.7798 9.92017 18.5898 10.2002 18.5898H13.8502C14.1302 18.5898 14.3702 18.7798 14.4402 19.0598L14.7502 20.4498C14.9402 21.2998 14.3002 21.9998 13.3202 21.9998Z" />
            </svg>
            ,
            title: t.countless.create,
        },
        {
            img: <svg className={cx(css.status, css.icons)} width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.19 2H7.81C4.17 2 2 4.17 2 7.81V16.18C2 19.83 4.17 22 7.81 22H16.18C19.82 22 21.99 19.83 21.99 16.19V7.81C22 4.17 19.83 2 16.19 2ZM7.63 18.15C7.63 18.56 7.29 18.9 6.88 18.9C6.47 18.9 6.13 18.56 6.13 18.15V16.08C6.13 15.67 6.47 15.33 6.88 15.33C7.29 15.33 7.63 15.67 7.63 16.08V18.15ZM12.75 18.15C12.75 18.56 12.41 18.9 12 18.9C11.59 18.9 11.25 18.56 11.25 18.15V14C11.25 13.59 11.59 13.25 12 13.25C12.41 13.25 12.75 13.59 12.75 14V18.15ZM17.87 18.15C17.87 18.56 17.53 18.9 17.12 18.9C16.71 18.9 16.37 18.56 16.37 18.15V11.93C16.37 11.52 16.71 11.18 17.12 11.18C17.53 11.18 17.87 11.52 17.87 11.93V18.15ZM17.87 8.77C17.87 9.18 17.53 9.52 17.12 9.52C16.71 9.52 16.37 9.18 16.37 8.77V7.8C13.82 10.42 10.63 12.27 7.06 13.16C7 13.18 6.94 13.18 6.88 13.18C6.54 13.18 6.24 12.95 6.15 12.61C6.05 12.21 6.29 11.8 6.7 11.7C10.07 10.86 13.07 9.09 15.45 6.59H14.2C13.79 6.59 13.45 6.25 13.45 5.84C13.45 5.43 13.79 5.09 14.2 5.09H17.13C17.17 5.09 17.2 5.11 17.24 5.11C17.29 5.12 17.34 5.12 17.39 5.14C17.44 5.16 17.48 5.19 17.53 5.22C17.56 5.24 17.59 5.25 17.62 5.27C17.63 5.28 17.63 5.29 17.64 5.29C17.68 5.33 17.71 5.37 17.74 5.41C17.77 5.45 17.8 5.48 17.81 5.52C17.83 5.56 17.83 5.6 17.84 5.65C17.85 5.7 17.87 5.75 17.87 5.81C17.87 5.82 17.88 5.83 17.88 5.84V8.77H17.87Z" />
            </svg>
            ,
            title: t.countless.sales,
        },
    ]

    return (
        <div className={css.wrapper}>
            <p className={css.title}><span>{t.countless.title__left}</span> {t.countless.title__center}<br /> {t.countless.title__right}</p>
            <div className={css.blocks}>
                {step.map((item, index) => (
                    <div className={css.block} key={index}
                        style={{
                            opacity: `${offsetY >= 540 ? 1 : 0}`,
                        }}
                    >
                        {item.img}
                        <p className={css.blockTitle}>{item.title}</p>
                        <p className={css.blockDescr}>{t.countless.jobs__number}</p>
                    </div>
                ))}
            </div>
        </div >
    );
};

export default Countless;